{% extends "base/base.html" %}

{% block stylesheets %}
    {{ block.super }}
{% endblock stylesheets %}

{% block content %}
    <div class="right_col" role="main">
        <div class="">
            <div class="row top_tiles">
                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                    <div class="tile-stats">
                        <div class="icon"><i class="fa fa-caret-square-o-right"></i></div>
                        <div class="count">{{ user_num }}</div>
                        <h3>Total users</h3>
                    </div>
                </div>
                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                    <div class="tile-stats">
                        <div class="icon"><i class="fa fa-comments-o"></i></div>
                        <div class="count">1</div>
                        <h3>Online Users</h3>
                    </div>
                </div>
                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                    <div class="tile-stats">
                        <div class="icon"><i class="fa fa-sort-amount-desc"></i></div>
                        <div class="count">2</div>
                        <h3>Total Machine</h3>
                    </div>
                </div>
                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                    <div class="tile-stats">
                        <div class="icon"><i class="fa fa-check-square-o"></i></div>
                        <div class="count">2</div>
                        <h3>salt agent</h3>
                    </div>
                </div>
            </div>


            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel">
                        <div class="x_title">
                            <h2>
                                <small>Figure</small>
                            </h2>
                            <ul class="nav navbar-right panel_toolbox">
                                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                </li>
                                <li class="dropdown">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                                       aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                    <ul class="dropdown-menu" role="menu">
                                        <li><a href="#">Settings 1</a>
                                        </li>
                                        <li><a href="#">Settings 2</a>
                                        </li>
                                    </ul>
                                </li>
                                <li><a class="close-link"><i class="fa fa-close"></i></a>
                                </li>
                            </ul>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <div class="col-md-6" id="main" style="width: 50%;height:400px;"></div>
                            <div class="col-md-6" id="main2" style="width: 50%;height:400px;"></div>
                            <div class="col-md-12" id="main3" style="width: 100%;height:400px;"></div>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>
{% endblock content %}

{% block javascripts %}
    {{ block.super }}
    <!-- Chart.js -->
    <script src="/static/vendors/echarts/echarts.min.js"></script>
    <script type="text/javascript">
        var change = Math.floor(Math.random() * 41);
        // 基于准备好的dom，初始化echarts实例

        var myChart = echarts.init(document.getElementById('main'));
        var myChart2 = echarts.init(document.getElementById('main2'));

        // 指定图表的配置项和数据
        // 饼图
        var option_pie = {
            title: {
                text: 'User access source',
                x: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                data: ['Direct access', 'Email marketing', 'Image advertising', 'Video advertising', 'search engine']
            },
            series: [
                {
                    name: 'Visit Source',
                    type: 'pie',
                    radius: '55%',
                    center: ['50%', '60%'],
                    data: [
                        {value: 335-change, name: 'Direct access'},
                        {value: 310+change, name: 'Email marketing'},
                        {value: 234-change, name: 'Image advertising '},
                        {value: 135+change, name: 'Video advertising'},
                        {value: 1500-change, name: 'search engine'}
                    ],
                    itemStyle: {
                        emphasis: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };

        // 柱图
        var option_bar = {

            title: {
                text: 'Machine distribution'
            },
            tooltip: {},
            legend: {
                data: ['Nums']
            },
            xAxis: {
                data: ["A", "B", "C", "D", "E", "F"]
            },
            yAxis: {},
            series: [{
                name: 'Sales',
                type: 'bar',
                data: [1+change, 10+change, 16+change, 10+change, 10+change, 20+change]
            }]
        };


        myChart.setOption(option_pie);
        myChart2.setOption(option_bar);

        function randomData() {
            now = new Date(+now + oneDay);
            value = value + Math.random() * 21 - 10;
            return {
                name: now.toString(),
                value: [
                    [now.getFullYear(), now.getMonth() + 1, now.getDate()].join('/'),
                    Math.round(value)
                ]
            }
        }


        $(function () {
            var myChart_line = echarts.init(document.getElementById('main3'));
            option_line = {
                title: {
                    text: 'Network Trend Graph'
                },
                xAxis: {
                    type: 'category',
                    data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
                },
                yAxis: {
                    type: 'value'
                },
                series: [{
                    data: [820-4*change, 932+change, 901+2*change, 934+2*change, 1290+change, 1330-2*change, 1320+2*change],
                    type: 'line'
                }]
            };
            myChart_line.setOption(option_line);
        })


    </script>
{% endblock javascripts %}
